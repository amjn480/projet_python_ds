["network", "address", "translation", "nat", "is", "a", "method", "of", "mapping", "an", "ip", "address", "space", "into", "another", "by", "modifying", "network", "address", "information", "in", "the", "ip", "header", "of", "packets", "while", "they", "are", "in", "transit", "across", "a", "traffic", "routing", "device", "the", "technique", "was", "originally", "used", "to", "bypass", "the", "need", "to", "assign", "a", "new", "address", "to", "every", "host", "when", "a", "network", "was", "moved", "or", "when", "the", "upstream", "internet", "service", "provider", "was", "replaced", "but", "could", "not", "route", "the", "network's", "address", "space", "it", "has", "become", "a", "popular", "and", "essential", "tool", "in", "conserving", "global", "address", "space", "in", "the", "face", "of", "ipv", "address", "exhaustion", "one", "internetroutable", "ip", "address", "of", "a", "nat", "gateway", "can", "be", "used", "for", "an", "entire", "private", "networkas", "network", "address", "translation", "modifies", "the", "ip", "address", "information", "in", "packets", "nat", "implementations", "may", "vary", "in", "their", "specific", "behavior", "in", "various", "addressing", "cases", "and", "their", "effect", "on", "network", "traffic", "the", "specifics", "of", "nat", "behavior", "are", "not", "commonly", "documented", "by", "vendors", "of", "equipment", "containing", "nat", "implementations", "history", "ipv", "uses", "bit", "addresses", "capable", "of", "uniquely", "addressing", "about", "billion", "devices", "by", "it", "became", "evident", "that", "that", "would", "not", "be", "enough", "the", "rfc", "describes", "nat", "as", "a", "\"shortterm", "solution\"", "to", "the", "two", "most", "compelling", "problems", "facing", "the", "ip", "internet", "at", "that", "time", "ip", "address", "depletion", "and", "scaling", "in", "routing", "by", "nat", "had", "become", "widespread", "basic", "nat", "the", "simplest", "type", "of", "nat", "provides", "a", "onetoone", "translation", "of", "ip", "addresses", "rfc", "rfc", "refers", "to", "this", "type", "of", "nat", "as", "basic", "nat", "it", "is", "also", "called", "a", "onetoone", "nat", "in", "this", "type", "of", "nat", "only", "the", "ip", "addresses", "ip", "header", "checksum", "and", "any", "higherlevel", "checksums", "that", "include", "the", "ip", "address", "are", "changed", "basic", "nat", "can", "be", "used", "to", "interconnect", "two", "ip", "networks", "that", "have", "incompatible", "addressing", "onetomany", "nat", "the", "majority", "of", "network", "address", "translators", "map", "multiple", "private", "hosts", "to", "one", "publicly", "exposed", "ip", "address", "here", "is", "a", "typical", "configuration", "a", "local", "network", "uses", "one", "of", "the", "designated", "private", "ip", "address", "subnets", "rfc", "the", "network", "has", "a", "router", "having", "both", "a", "private", "and", "a", "public", "address", "the", "private", "address", "is", "used", "by", "the", "router", "for", "communicating", "with", "other", "devices", "in", "the", "private", "local", "network", "the", "public", "address", "typically", "assigned", "by", "an", "internet", "service", "provider", "is", "used", "by", "the", "router", "for", "communicating", "with", "the", "rest", "of", "the", "internet", "as", "traffic", "passes", "from", "the", "network", "to", "the", "internet", "the", "router", "translates", "the", "source", "address", "in", "each", "packet", "from", "a", "private", "address", "to", "the", "router's", "own", "public", "address", "the", "router", "tracks", "basic", "data", "about", "each", "active", "connection", "particularly", "the", "destination", "address", "and", "port", "when", "the", "router", "receives", "inbound", "traffic", "from", "the", "internet", "it", "uses", "the", "connection", "tracking", "data", "it", "stored", "during", "the", "outbound", "phase", "to", "determine", "to", "which", "private", "address", "if", "any", "it", "should", "forward", "the", "replyall", "ip", "packets", "have", "a", "source", "ip", "address", "and", "a", "destination", "ip", "address", "typically", "packets", "passing", "from", "the", "private", "network", "to", "the", "public", "network", "will", "have", "their", "source", "address", "modified", "while", "packets", "passing", "from", "the", "public", "network", "back", "to", "the", "private", "network", "will", "have", "their", "destination", "address", "modified", "to", "avoid", "ambiguity", "in", "how", "replies", "are", "translated", "further", "modifications", "to", "the", "packets", "are", "required", "the", "vast", "bulk", "of", "internet", "traffic", "uses", "transmission", "control", "protocol", "tcp", "or", "user", "datagram", "protocol", "udp", "for", "these", "protocols", "the", "port", "numbers", "are", "changed", "so", "that", "the", "combination", "of", "ip", "address", "within", "the", "ip", "header", "and", "port", "number", "within", "the", "transport", "layer", "header", "on", "the", "returned", "packet", "can", "be", "unambiguously", "mapped", "to", "the", "corresponding", "private", "network", "destination", "rfc", "uses", "the", "term", "network", "address", "and", "port", "translation", "napt", "for", "this", "type", "of", "nat", "other", "names", "include", "port", "address", "translation", "pat", "ip", "masquerading", "nat", "overload", "and", "manytoone", "nat", "this", "is", "the", "most", "common", "type", "of", "nat", "and", "has", "become", "synonymous", "with", "the", "term", "\"nat\"", "in", "common", "usage", "this", "method", "allows", "communication", "through", "the", "router", "only", "when", "the", "conversation", "originates", "in", "the", "private", "network", "since", "the", "initial", "originating", "transmission", "is", "what", "establishes", "the", "required", "information", "in", "the", "translation", "tables", "thus", "a", "web", "browser", "within", "the", "private", "network", "would", "be", "able", "to", "browse", "websites", "that", "are", "outside", "the", "network", "whereas", "web", "browsers", "outside", "the", "network", "would", "be", "unable", "to", "browse", "a", "website", "hosted", "within", "protocols", "not", "based", "on", "tcp", "and", "udp", "require", "other", "translation", "techniques", "an", "additional", "benefit", "of", "onetomany", "nat", "is", "that", "it", "mitigates", "ipv", "address", "exhaustion", "by", "allowing", "entire", "networks", "to", "be", "connected", "to", "the", "internet", "using", "a", "single", "public", "ip", "address", "methods", "of", "translation", "network", "address", "and", "port", "translation", "may", "be", "implemented", "in", "several", "ways", "some", "applications", "that", "use", "ip", "address", "information", "may", "need", "to", "determine", "the", "external", "address", "of", "a", "network", "address", "translator", "this", "is", "the", "address", "that", "its", "communication", "peers", "in", "the", "external", "network", "detect", "furthermore", "it", "may", "be", "necessary", "to", "examine", "and", "categorize", "the", "type", "of", "mapping", "in", "use", "for", "example", "when", "it", "is", "desired", "to", "set", "up", "a", "direct", "communication", "path", "between", "two", "clients", "both", "of", "which", "are", "behind", "separate", "nat", "gateways", "for", "this", "purpose", "rfc", "specified", "a", "protocol", "called", "simple", "traversal", "of", "udp", "over", "nats", "stun", "in", "it", "classified", "nat", "implementations", "as", "fullcone", "nat", "address", "restrictedcone", "nat", "portrestricted", "cone", "nat", "or", "symmetric", "nat", "and", "proposed", "a", "methodology", "for", "testing", "a", "device", "accordingly", "however", "these", "procedures", "have", "since", "been", "deprecated", "from", "standards", "status", "as", "the", "methods", "are", "inadequate", "to", "correctly", "assess", "many", "devices", "rfc", "standardized", "new", "methods", "in", "and", "the", "acronym", "stun", "now", "represents", "the", "new", "title", "of", "the", "specification", "session", "traversal", "utilities", "for", "nat", "many", "nat", "implementations", "combine", "these", "types", "so", "it", "is", "better", "to", "refer", "to", "specific", "individual", "nat", "behavior", "instead", "of", "using", "the", "conesymmetric", "terminology", "rfc", "attempts", "to", "alleviate", "confusion", "by", "introducing", "standardized", "terminology", "for", "observed", "behaviors", "for", "the", "first", "bullet", "in", "each", "row", "of", "the", "above", "table", "the", "rfc", "would", "characterize", "fullcone", "restrictedcone", "and", "portrestricted", "cone", "nats", "as", "having", "an", "endpointindependent", "mapping", "whereas", "it", "would", "characterize", "a", "symmetric", "nat", "as", "having", "an", "address", "and", "portdependent", "mapping", "for", "the", "second", "bullet", "in", "each", "row", "of", "the", "above", "table", "rfc", "would", "also", "label", "fullcone", "nat", "as", "having", "an", "endpointindependent", "filtering", "restrictedcone", "nat", "as", "having", "an", "addressdependent", "filtering", "portrestricted", "cone", "nat", "as", "having", "an", "address", "and", "portdependent", "filtering", "and", "symmetric", "nat", "as", "having", "either", "an", "addressdependent", "filtering", "or", "address", "and", "portdependent", "filtering", "other", "classifications", "of", "nat", "behavior", "mentioned", "in", "the", "rfc", "include", "whether", "they", "preserve", "ports", "when", "and", "how", "mappings", "are", "refreshed", "whether", "external", "mappings", "can", "be", "used", "by", "internal", "hosts", "ie", "its", "hairpinning", "behavior", "and", "the", "level", "of", "determinism", "nats", "exhibit", "when", "applying", "all", "these", "rules", "specifically", "most", "nats", "combine", "symmetric", "nat", "for", "outgoing", "connections", "with", "static", "port", "mapping", "where", "incoming", "packets", "addressed", "to", "the", "external", "address", "and", "port", "are", "redirected", "to", "a", "specific", "internal", "address", "and", "port", "type", "of", "nat", "and", "nat", "traversal", "role", "of", "port", "preservation", "for", "tcp", "the", "nat", "traversal", "problem", "arises", "when", "peers", "behind", "different", "nats", "try", "to", "communicate", "one", "way", "to", "solve", "this", "problem", "is", "to", "use", "port", "forwarding", "another", "way", "is", "to", "use", "various", "nat", "traversal", "techniques", "the", "most", "popular", "technique", "for", "tcp", "nat", "traversal", "is", "tcp", "hole", "punching", "tcp", "hole", "punching", "requires", "the", "nat", "to", "follow", "the", "port", "preservation", "design", "for", "tcp", "for", "a", "given", "outgoing", "tcp", "communication", "the", "same", "port", "numbers", "are", "used", "on", "both", "sides", "of", "the", "nat", "nat", "port", "preservation", "for", "outgoing", "tcp", "connections", "is", "crucial", "for", "tcp", "nat", "traversal", "because", "under", "tcp", "one", "port", "can", "only", "be", "used", "for", "one", "communication", "at", "a", "time", "so", "programs", "bind", "distinct", "tcp", "sockets", "to", "ephemeral", "ports", "for", "each", "tcp", "communication", "rendering", "nat", "port", "prediction", "impossible", "for", "tcpon", "the", "other", "hand", "for", "udp", "nats", "do", "not", "need", "port", "preservation", "indeed", "multiple", "udp", "communications", "each", "with", "a", "distinct", "endpoint", "can", "occur", "on", "the", "same", "source", "port", "and", "applications", "usually", "reuse", "the", "same", "udp", "socket", "to", "send", "packets", "to", "distinct", "hosts", "this", "makes", "port", "prediction", "straightforward", "as", "it", "is", "the", "same", "source", "port", "for", "each", "packet", "furthermore", "port", "preservation", "in", "nat", "for", "tcp", "allows", "pp", "protocols", "to", "offer", "less", "complexity", "and", "less", "latency", "because", "there", "is", "no", "need", "to", "use", "a", "third", "party", "like", "stun", "to", "discover", "the", "nat", "port", "since", "the", "application", "itself", "already", "knows", "the", "nat", "porthowever", "if", "two", "internal", "hosts", "attempt", "to", "communicate", "with", "the", "same", "external", "host", "using", "the", "same", "port", "number", "the", "nat", "may", "attempt", "to", "use", "a", "different", "external", "ip", "address", "for", "the", "second", "connection", "or", "may", "need", "to", "forgo", "port", "preservation", "and", "remap", "the", "port", "as", "of", "roughly", "of", "the", "clients", "in", "pp", "networks", "employed", "some", "form", "of", "nat", "implementation", "establishing", "twoway", "communication", "every", "tcp", "and", "udp", "packet", "contains", "a", "source", "port", "number", "and", "a", "destination", "port", "number", "each", "of", "those", "packets", "is", "encapsulated", "in", "an", "ip", "packet", "whose", "ip", "header", "contains", "a", "source", "ip", "address", "and", "a", "destination", "ip", "address", "the", "ip", "addressprotocolport", "number", "triple", "defines", "an", "association", "with", "a", "network", "socket", "for", "publicly", "accessible", "services", "such", "as", "web", "and", "mail", "servers", "the", "port", "number", "is", "important", "for", "example", "port", "connects", "through", "a", "socket", "to", "the", "web", "server", "software", "and", "port", "to", "a", "mail", "server's", "smtp", "daemon", "the", "ip", "address", "of", "a", "public", "server", "is", "also", "important", "similar", "in", "global", "uniqueness", "to", "a", "postal", "address", "or", "telephone", "number", "both", "ip", "address", "and", "port", "number", "must", "be", "correctly", "known", "by", "all", "hosts", "wishing", "to", "successfully", "communicate", "private", "ip", "addresses", "as", "described", "in", "rfc", "are", "usable", "only", "on", "private", "networks", "not", "directly", "connected", "to", "the", "internet", "ports", "are", "endpoints", "of", "communication", "unique", "to", "that", "host", "so", "a", "connection", "through", "the", "nat", "device", "is", "maintained", "by", "the", "combined", "mapping", "of", "port", "and", "ip", "address", "a", "private", "address", "on", "the", "inside", "of", "the", "nat", "is", "mapped", "to", "an", "external", "public", "address", "port", "address", "translation", "pat", "resolves", "conflicts", "that", "arise", "when", "multiple", "hosts", "happen", "to", "use", "the", "same", "source", "port", "number", "to", "establish", "different", "external", "connections", "at", "the", "same", "time", "telephone", "number", "extension", "analogy", "a", "nat", "device", "is", "similar", "to", "a", "phone", "system", "at", "an", "office", "that", "has", "one", "public", "telephone", "number", "and", "multiple", "extensions", "outbound", "phone", "calls", "made", "from", "the", "office", "all", "appear", "to", "come", "from", "the", "same", "telephone", "number", "however", "an", "incoming", "call", "that", "does", "not", "specify", "an", "extension", "cannot", "be", "automatically", "transferred", "to", "an", "individual", "inside", "the", "office", "in", "this", "scenario", "the", "office", "is", "a", "private", "lan", "the", "main", "phone", "number", "is", "the", "public", "ip", "address", "and", "the", "individual", "extensions", "are", "unique", "port", "numbers", "translation", "process", "with", "nat", "all", "communications", "sent", "to", "external", "hosts", "actually", "contain", "the", "external", "ip", "address", "and", "port", "information", "of", "the", "nat", "device", "instead", "of", "internal", "host", "ip", "addresses", "or", "port", "numbers", "nat", "only", "translates", "ip", "addresses", "and", "ports", "of", "its", "internal", "hosts", "hiding", "the", "true", "endpoint", "of", "an", "internal", "host", "on", "a", "private", "network", "when", "a", "computer", "on", "the", "private", "internal", "network", "sends", "an", "ip", "packet", "to", "the", "external", "network", "the", "nat", "device", "replaces", "the", "internal", "source", "ip", "address", "in", "the", "packet", "header", "with", "the", "external", "ip", "address", "of", "the", "nat", "device", "pat", "may", "then", "assign", "the", "connection", "a", "port", "number", "from", "a", "pool", "of", "available", "ports", "inserting", "this", "port", "number", "in", "the", "source", "port", "field", "the", "packet", "is", "then", "forwarded", "to", "the", "external", "network", "the", "nat", "device", "then", "makes", "an", "entry", "in", "a", "translation", "table", "containing", "the", "internal", "ip", "address", "original", "source", "port", "and", "the", "translated", "source", "port", "subsequent", "packets", "from", "the", "same", "internal", "source", "ip", "address", "and", "port", "number", "are", "translated", "to", "the", "same", "external", "source", "ip", "address", "and", "port", "number", "the", "computer", "receiving", "a", "packet", "that", "has", "undergone", "nat", "establishes", "a", "connection", "to", "the", "port", "and", "ip", "address", "specified", "in", "the", "altered", "packet", "oblivious", "to", "the", "fact", "that", "the", "supplied", "address", "is", "being", "translated", "upon", "receiving", "a", "packet", "from", "the", "external", "network", "the", "nat", "device", "searches", "the", "translation", "table", "based", "on", "the", "destination", "port", "in", "the", "packet", "header", "if", "a", "match", "is", "found", "the", "destination", "ip", "address", "and", "port", "number", "is", "replaced", "with", "the", "values", "found", "in", "the", "table", "and", "the", "packet", "is", "forwarded", "to", "the", "inside", "network", "otherwise", "if", "the", "destination", "port", "number", "of", "the", "incoming", "packet", "is", "not", "found", "in", "the", "translation", "table", "the", "packet", "is", "dropped", "or", "rejected", "because", "the", "pat", "device", "doesn't", "know", "where", "to", "send", "it", "visibility", "of", "operation", "nat", "operation", "is", "typically", "transparent", "to", "both", "the", "internal", "and", "external", "hosts", "the", "nat", "device", "may", "function", "as", "the", "default", "gateway", "for", "the", "internal", "host", "which", "is", "typically", "aware", "of", "the", "true", "ip", "address", "and", "tcp", "or", "udp", "port", "of", "the", "external", "host", "however", "the", "external", "host", "is", "only", "aware", "of", "the", "public", "ip", "address", "for", "the", "nat", "device", "and", "the", "particular", "port", "being", "used", "to", "communicate", "on", "behalf", "of", "a", "specific", "internal", "host", "applications", "routing", "network", "address", "translation", "can", "be", "used", "to", "mitigate", "ip", "address", "overlap", "address", "overlap", "occurs", "when", "hosts", "in", "different", "networks", "with", "the", "same", "ip", "address", "space", "try", "to", "reach", "the", "same", "destination", "host", "this", "is", "most", "often", "a", "misconfiguration", "and", "may", "result", "from", "the", "merger", "of", "two", "networks", "or", "subnets", "especially", "when", "using", "rfc", "private", "network", "addressing", "the", "destination", "host", "experiences", "traffic", "apparently", "arriving", "from", "the", "same", "network", "and", "intermediate", "routers", "have", "no", "way", "to", "determine", "where", "reply", "traffic", "should", "be", "sent", "to", "the", "solution", "is", "either", "renumbering", "to", "eliminate", "overlap", "or", "network", "address", "translationload", "balancing", "in", "clientserver", "applications", "load", "balancers", "forward", "client", "requests", "to", "a", "set", "of", "server", "computers", "to", "manage", "the", "workload", "of", "each", "server", "network", "address", "translation", "may", "be", "used", "to", "map", "a", "representative", "ip", "address", "of", "the", "server", "cluster", "to", "specific", "hosts", "that", "service", "the", "request", "related", "techniques", "ieee", "reverse", "address", "and", "port", "translation", "rapt", "or", "rat", "allows", "a", "host", "whose", "real", "ip", "address", "changes", "from", "time", "to", "time", "to", "remain", "reachable", "as", "a", "server", "via", "a", "fixed", "home", "ip", "address", "cisco's", "rapt", "implementation", "is", "pat", "or", "nat", "overloading", "and", "maps", "multiple", "private", "ip", "addresses", "to", "a", "single", "public", "ip", "address", "multiple", "addresses", "can", "be", "mapped", "to", "a", "single", "address", "because", "each", "private", "address", "is", "tracked", "by", "a", "port", "number", "pat", "uses", "unique", "source", "port", "numbers", "on", "the", "inside", "global", "ip", "address", "to", "distinguish", "between", "translations", "pat", "attempts", "to", "preserve", "the", "original", "source", "port", "if", "this", "source", "port", "is", "already", "used", "pat", "assigns", "the", "first", "available", "port", "number", "starting", "from", "the", "beginning", "of", "the", "appropriate", "port", "group", "or", "when", "there", "are", "no", "more", "ports", "available", "and", "there", "is", "more", "than", "one", "external", "ip", "address", "configured", "pat", "moves", "to", "the", "next", "ip", "address", "to", "try", "to", "allocate", "the", "original", "source", "port", "again", "this", "process", "continues", "until", "it", "runs", "out", "of", "available", "ports", "and", "external", "ip", "addresses", "mapping", "of", "address", "and", "port", "is", "a", "cisco", "proposal", "that", "combines", "address", "plus", "port", "translation", "with", "tunneling", "of", "the", "ipv", "packets", "over", "an", "isp", "provider's", "internal", "ipv", "network", "in", "effect", "it", "is", "an", "almost", "stateless", "alternative", "to", "carriergrade", "nat", "and", "dslite", "that", "pushes", "the", "ipv", "addressport", "translation", "function", "and", "the", "maintenance", "of", "nat", "state", "entirely", "into", "the", "existing", "customer", "premises", "equipment", "nat", "implementation", "thus", "avoiding", "the", "nat", "and", "statefulness", "problems", "of", "carriergrade", "nat", "and", "also", "provides", "a", "transition", "mechanism", "for", "the", "deployment", "of", "native", "ipv", "at", "the", "same", "time", "with", "very", "little", "added", "complexity", "issues", "and", "limitations", "hosts", "behind", "natenabled", "routers", "do", "not", "have", "endtoend", "connectivity", "and", "cannot", "participate", "in", "some", "internet", "protocols", "services", "that", "require", "the", "initiation", "of", "tcp", "connections", "from", "the", "outside", "network", "or", "that", "use", "stateless", "protocols", "such", "as", "those", "using", "udp", "can", "be", "disrupted", "unless", "the", "nat", "router", "makes", "a", "specific", "effort", "to", "support", "such", "protocols", "incoming", "packets", "cannot", "reach", "their", "destination", "some", "protocols", "can", "accommodate", "one", "instance", "of", "nat", "between", "participating", "hosts", "\"passive", "mode\"", "ftp", "for", "example", "sometimes", "with", "the", "assistance", "of", "an", "applicationlevel", "gateway", "see", "\u00a7", "applications", "affected", "by", "nat", "but", "fail", "when", "both", "systems", "are", "separated", "from", "the", "internet", "by", "nat", "the", "use", "of", "nat", "also", "complicates", "tunneling", "protocols", "such", "as", "ipsec", "because", "nat", "modifies", "values", "in", "the", "headers", "which", "interfere", "with", "the", "integrity", "checks", "done", "by", "ipsec", "and", "other", "tunneling", "protocols", "endtoend", "connectivity", "has", "been", "a", "core", "principle", "of", "the", "internet", "supported", "for", "example", "by", "the", "internet", "architecture", "board", "current", "internet", "architectural", "documents", "observe", "that", "nat", "is", "a", "violation", "of", "the", "endtoend", "principle", "but", "that", "nat", "does", "have", "a", "valid", "role", "in", "careful", "design", "there", "is", "considerably", "more", "concern", "with", "the", "use", "of", "ipv", "nat", "and", "many", "ipv", "architects", "believe", "ipv", "was", "intended", "to", "remove", "the", "need", "for", "natan", "implementation", "that", "only", "tracks", "ports", "can", "be", "quickly", "depleted", "by", "internal", "applications", "that", "use", "multiple", "simultaneous", "connections", "such", "as", "an", "http", "request", "for", "a", "web", "page", "with", "many", "embedded", "objects", "this", "problem", "can", "be", "mitigated", "by", "tracking", "the", "destination", "ip", "address", "in", "addition", "to", "the", "port", "thus", "sharing", "a", "single", "local", "port", "with", "many", "remote", "hosts", "this", "additional", "tracking", "increases", "implementation", "complexity", "and", "computing", "resources", "at", "the", "translation", "device", "because", "the", "internal", "addresses", "are", "all", "disguised", "behind", "one", "publicly", "accessible", "address", "it", "is", "impossible", "for", "external", "hosts", "to", "directly", "initiate", "a", "connection", "to", "a", "particular", "internal", "host", "applications", "such", "as", "voip", "videoconferencing", "and", "other", "peertopeer", "applications", "must", "use", "nat", "traversal", "techniques", "to", "function", "fragmentation", "and", "checksums", "pure", "nat", "operating", "on", "ip", "alone", "may", "or", "may", "not", "correctly", "parse", "protocols", "with", "payloads", "containing", "information", "about", "ip", "such", "as", "icmp", "this", "depends", "on", "whether", "the", "payload", "is", "interpreted", "by", "a", "host", "on", "the", "inside", "or", "outside", "of", "the", "translation", "basic", "protocols", "as", "tcp", "and", "udp", "cannot", "function", "properly", "unless", "nat", "takes", "action", "beyond", "the", "network", "layer", "ip", "packets", "have", "a", "checksum", "in", "each", "packet", "header", "which", "provides", "error", "detection", "only", "for", "the", "header", "ip", "datagrams", "may", "become", "fragmented", "and", "it", "is", "necessary", "for", "a", "nat", "to", "reassemble", "these", "fragments", "to", "allow", "correct", "recalculation", "of", "higherlevel", "checksums", "and", "correct", "tracking", "of", "which", "packets", "belong", "to", "which", "connection", "tcp", "and", "udp", "have", "a", "checksum", "that", "covers", "all", "the", "data", "they", "carry", "as", "well", "as", "the", "tcp", "or", "udp", "header", "plus", "a", "pseudoheader", "that", "contains", "the", "source", "and", "destination", "ip", "addresses", "of", "the", "packet", "carrying", "the", "tcp", "or", "udp", "header", "for", "an", "originating", "nat", "to", "pass", "tcp", "or", "udp", "successfully", "it", "must", "recompute", "the", "tcp", "or", "udp", "header", "checksum", "based", "on", "the", "translated", "ip", "addresses", "not", "the", "original", "ones", "and", "put", "that", "checksum", "into", "the", "tcp", "or", "udp", "header", "of", "the", "first", "packet", "of", "the", "fragmented", "set", "of", "packets", "alternatively", "the", "originating", "host", "may", "perform", "path", "mtu", "discovery", "to", "determine", "the", "packet", "size", "that", "can", "be", "transmitted", "without", "fragmentation", "and", "then", "set", "the", "don't", "fragment", "df", "bit", "in", "the", "appropriate", "packet", "header", "field", "this", "is", "only", "a", "oneway", "solution", "because", "the", "responding", "host", "can", "send", "packets", "of", "any", "size", "which", "may", "be", "fragmented", "before", "reaching", "the", "nat", "variant", "terms", "dnat", "destination", "network", "address", "translation", "dnat", "is", "a", "technique", "for", "transparently", "changing", "the", "destination", "ip", "address", "of", "a", "routed", "packet", "and", "performing", "the", "inverse", "function", "for", "any", "replies", "any", "router", "situated", "between", "two", "endpoints", "can", "perform", "this", "transformation", "of", "the", "packet", "dnat", "is", "commonly", "used", "to", "publish", "a", "service", "located", "in", "a", "private", "network", "on", "a", "publicly", "accessible", "ip", "address", "this", "use", "of", "dnat", "is", "also", "called", "port", "forwarding", "or", "dmz", "when", "used", "on", "an", "entire", "server", "which", "becomes", "exposed", "to", "the", "wan", "becoming", "analogous", "to", "an", "undefended", "military", "demilitarized", "zone", "dmz", "snat", "the", "meaning", "of", "the", "term", "snat", "varies", "by", "vendor", "source", "nat", "is", "a", "common", "expansion", "and", "is", "the", "counterpart", "of", "destination", "nat", "dnat", "this", "is", "used", "to", "describe", "onetomany", "nat", "nat", "for", "outgoing", "connections", "to", "public", "services", "stateful", "nat", "is", "used", "by", "cisco", "systems", "static", "nat", "is", "used", "by", "watchguard", "secure", "nat", "is", "used", "by", "f", "networks", "and", "by", "microsoft", "in", "regard", "to", "the", "isa", "serversecure", "network", "address", "translation", "snat", "is", "part", "of", "microsoft's", "internet", "security", "and", "acceleration", "server", "and", "is", "an", "extension", "to", "the", "nat", "driver", "built", "into", "microsoft", "windows", "server", "it", "provides", "connection", "tracking", "and", "filtering", "for", "the", "additional", "network", "connections", "needed", "for", "the", "ftp", "icmp", "h", "and", "pptp", "protocols", "as", "well", "as", "the", "ability", "to", "configure", "a", "transparent", "http", "proxy", "server", "dynamic", "network", "address", "translation", "dynamic", "nat", "just", "like", "static", "nat", "is", "not", "common", "in", "smaller", "networks", "but", "is", "found", "within", "larger", "corporations", "with", "complex", "networks", "where", "static", "nat", "provides", "a", "onetoone", "internal", "to", "public", "static", "ip", "address", "mapping", "dynamic", "nat", "uses", "a", "group", "of", "public", "ip", "addresses", "nat", "hairpinning", "nat", "hairpinning", "also", "known", "as", "nat", "loopback", "or", "nat", "reflection", "is", "a", "feature", "in", "many", "consumer", "routers", "where", "a", "machine", "on", "the", "lan", "is", "able", "to", "access", "another", "machine", "on", "the", "lan", "via", "the", "external", "ip", "address", "of", "the", "lanrouter", "with", "port", "forwarding", "set", "up", "on", "the", "router", "to", "direct", "requests", "to", "the", "appropriate", "machine", "on", "the", "lan", "this", "notion", "is", "officially", "described", "in", "rfc", "the", "following", "describes", "an", "example", "network", "public", "address", "this", "is", "the", "address", "of", "the", "wan", "interface", "on", "the", "router", "internal", "address", "of", "router", "address", "of", "the", "server", "address", "of", "a", "local", "computer", "if", "a", "packet", "is", "sent", "to", "by", "a", "computer", "at", "the", "packet", "would", "normally", "be", "routed", "to", "the", "default", "gateway", "the", "router", "a", "router", "with", "the", "nat", "loopback", "feature", "detects", "that", "is", "the", "address", "of", "its", "wan", "interface", "and", "treats", "the", "packet", "as", "if", "coming", "from", "that", "interface", "it", "determines", "the", "destination", "for", "that", "packet", "based", "on", "dnat", "port", "forwarding", "rules", "for", "the", "destination", "if", "the", "data", "were", "sent", "to", "port", "and", "a", "dnat", "rule", "exists", "for", "port", "directed", "to", "then", "the", "host", "at", "that", "address", "receives", "the", "packet", "if", "no", "applicable", "dnat", "rule", "is", "available", "the", "router", "drops", "the", "packet", "an", "icmp", "destination", "unreachable", "reply", "may", "be", "sent", "if", "any", "dnat", "rules", "were", "present", "address", "translation", "is", "still", "in", "effect", "the", "router", "still", "rewrites", "the", "source", "ip", "address", "in", "the", "packet", "the", "local", "computer", "sends", "the", "packet", "as", "coming", "from", "but", "the", "server", "receives", "it", "as", "coming", "from", "when", "the", "server", "replies", "the", "process", "is", "identical", "to", "an", "external", "sender", "thus", "twoway", "communication", "is", "possible", "between", "hosts", "inside", "the", "lan", "network", "via", "the", "public", "ip", "address", "nat", "in", "ipv", "network", "address", "translation", "is", "not", "commonly", "used", "in", "ipv", "because", "one", "of", "the", "design", "goals", "of", "ipv", "is", "to", "restore", "endtoend", "network", "connectivity", "the", "large", "addressing", "space", "of", "ipv", "obviates", "the", "need", "to", "conserve", "addresses", "and", "every", "device", "can", "be", "given", "a", "unique", "globally", "routable", "address", "use", "of", "unique", "local", "addresses", "in", "combination", "with", "network", "prefix", "translation", "can", "achieve", "results", "similar", "to", "nat", "the", "large", "addressing", "space", "of", "ipv", "can", "still", "be", "defeated", "depending", "on", "the", "actual", "prefix", "length", "given", "by", "the", "carrier", "it", "is", "not", "uncommon", "to", "be", "handed", "a", "prefix", "the", "smallest", "recommended", "subnet", "for", "an", "entire", "home", "network", "requiring", "a", "variety", "of", "techniques", "to", "be", "used", "to", "manually", "subdivide", "the", "range", "for", "all", "devices", "to", "remain", "reachable", "even", "actual", "ipvtoipv", "nat", "nat", "can", "turn", "out", "useful", "at", "times", "the", "apnic", "blog", "outlines", "a", "case", "where", "the", "author", "was", "only", "provided", "a", "single", "address", "applications", "affected", "by", "nat", "some", "application", "layer", "protocols", "such", "as", "file", "transfer", "protocol", "ftp", "and", "session", "initiation", "protocol", "sip", "send", "explicit", "network", "addresses", "within", "their", "application", "data", "ftp", "in", "active", "mode", "for", "example", "uses", "separate", "connections", "for", "control", "traffic", "commands", "and", "for", "data", "traffic", "file", "contents", "when", "requesting", "a", "file", "transfer", "the", "host", "making", "the", "request", "identifies", "the", "corresponding", "data", "connection", "by", "its", "network", "layer", "and", "transport", "layer", "addresses", "if", "the", "host", "making", "the", "request", "lies", "behind", "a", "simple", "nat", "firewall", "the", "translation", "of", "the", "ip", "address", "or", "tcp", "port", "number", "makes", "the", "information", "received", "by", "the", "server", "invalid", "sip", "commonly", "controls", "voice", "over", "ip", "calls", "and", "suffer", "the", "same", "problem", "sip", "and", "its", "accompanying", "session", "description", "protocol", "may", "use", "multiple", "ports", "to", "set", "up", "a", "connection", "and", "transmit", "voice", "stream", "via", "realtime", "transport", "protocol", "ip", "addresses", "and", "port", "numbers", "are", "encoded", "in", "the", "payload", "data", "and", "must", "be", "known", "before", "the", "traversal", "of", "nats", "without", "special", "techniques", "such", "as", "stun", "nat", "behavior", "is", "unpredictable", "and", "communications", "may", "fail", "application", "layer", "gateway", "alg", "software", "or", "hardware", "may", "correct", "these", "problems", "an", "alg", "software", "module", "running", "on", "a", "nat", "firewall", "device", "updates", "any", "payload", "data", "made", "invalid", "by", "address", "translation", "algs", "need", "to", "understand", "the", "higherlayer", "protocol", "that", "they", "need", "to", "fix", "and", "so", "each", "protocol", "with", "this", "problem", "requires", "a", "separate", "alg", "for", "example", "on", "many", "linux", "systems", "there", "are", "kernel", "modules", "called", "connection", "trackers", "that", "serve", "to", "implement", "algs", "however", "alg", "cannot", "work", "if", "the", "protocol", "data", "is", "encrypted", "another", "possible", "solution", "to", "this", "problem", "is", "to", "use", "nat", "traversal", "techniques", "using", "protocols", "such", "as", "stun", "or", "interactive", "connectivity", "establishment", "ice", "or", "proprietary", "approaches", "in", "a", "session", "border", "controller", "nat", "traversal", "is", "possible", "in", "both", "tcp", "and", "udpbased", "applications", "but", "the", "udpbased", "technique", "is", "simpler", "more", "widely", "understood", "and", "more", "compatible", "with", "legacy", "nats", "in", "either", "case", "the", "highlevel", "protocol", "must", "be", "designed", "with", "nat", "traversal", "in", "mind", "and", "it", "does", "not", "work", "reliably", "across", "symmetric", "nats", "or", "other", "poorly", "behaved", "legacy", "nats", "other", "possibilities", "are", "port", "control", "protocol", "pcp", "nat", "port", "mapping", "protocol", "natpmp", "or", "internet", "gateway", "device", "protocol", "but", "these", "require", "the", "nat", "device", "to", "implement", "that", "protocol", "most", "clientserver", "protocols", "ftp", "being", "the", "main", "exception", "however", "do", "not", "send", "layer", "contact", "information", "and", "do", "not", "require", "any", "special", "treatment", "by", "nats", "in", "fact", "avoiding", "nat", "complications", "is", "practically", "a", "requirement", "when", "designing", "new", "higherlayer", "protocols", "today", "nats", "can", "also", "cause", "problems", "where", "ipsec", "encryption", "is", "applied", "and", "in", "cases", "where", "multiple", "devices", "such", "as", "sip", "phones", "are", "located", "behind", "a", "nat", "phones", "that", "encrypt", "their", "signaling", "with", "ipsec", "encapsulate", "the", "port", "information", "within", "an", "encrypted", "packet", "meaning", "that", "nat", "devices", "cannot", "access", "and", "translate", "the", "port", "in", "these", "cases", "the", "nat", "devices", "revert", "to", "simple", "nat", "operations", "this", "means", "that", "all", "traffic", "returning", "to", "the", "nat", "is", "mapped", "onto", "one", "client", "causing", "service", "to", "more", "than", "one", "client", "behind", "the", "nat", "to", "fail", "there", "are", "a", "couple", "of", "solutions", "to", "this", "problem", "one", "is", "to", "use", "tls", "which", "operates", "at", "layer", "and", "does", "not", "mask", "the", "port", "number", "another", "is", "to", "encapsulate", "the", "ipsec", "within", "udp", "the", "latter", "being", "the", "solution", "chosen", "by", "tispan", "to", "achieve", "secure", "nat", "traversal", "or", "a", "nat", "with", "\"ipsec", "passthru\"", "support", "another", "is", "to", "use", "a", "session", "border", "controller", "to", "help", "traverse", "the", "nat", "interactive", "connectivity", "establishment", "is", "a", "nat", "traversal", "technique", "that", "does", "not", "rely", "on", "alg", "support", "the", "dns", "protocol", "vulnerability", "announced", "by", "dan", "kaminsky", "on", "july", "is", "indirectly", "affected", "by", "nat", "port", "mapping", "to", "avoid", "dns", "cache", "poisoning", "it", "is", "highly", "desirable", "not", "to", "translate", "udp", "source", "port", "numbers", "of", "outgoing", "dns", "requests", "from", "a", "dns", "server", "behind", "a", "firewall", "that", "implements", "nat", "the", "recommended", "workaround", "for", "the", "dns", "vulnerability", "is", "to", "make", "all", "caching", "dns", "servers", "use", "randomized", "udp", "source", "ports", "if", "the", "nat", "function", "derandomizes", "the", "udp", "source", "ports", "the", "dns", "server", "becomes", "vulnerable", "examples", "of", "nat", "software", "internet", "connection", "sharing", "ics", "nat", "&", "dhcp", "implementation", "included", "with", "windows", "desktop", "operating", "systems", "ipfilter", "included", "with", "opensolaris", "freebsd", "and", "netbsd", "available", "for", "many", "other", "unixlike", "operating", "systems", "ipfirewall", "ipfw", "freebsdnative", "packet", "filter", "netfilter", "with", "iptablesnftables", "the", "linux", "packet", "filter", "npf", "netbsdnative", "packet", "filter", "pf", "openbsdnative", "packet", "filter", "routing", "and", "remote", "access", "service", "rras", "routing", "implementation", "included", "with", "windows", "server", "operating", "systems", "vpp", "user", "space", "packet", "forwarding", "implementation", "for", "linux", "wingate", "thirdparty", "routing", "implementation", "for", "windows", "see", "also", "anything", "in", "anything", "ayiya", "ipv", "over", "ipv", "udp", "thus", "working", "ipv", "tunneling", "over", "most", "nats", "carriergrade", "nat", "nat", "behind", "nat", "within", "isp", "gateway", "telecommunications", "connection", "between", "two", "network", "systems", "internet", "gateway", "device", "protocol", "upnp", "igd", "nattraversal", "method", "middlebox", "intermediary", "box", "on", "the", "data", "path", "between", "a", "source", "host", "and", "destination", "host", "nat", "port", "mapping", "protocol", "natpmp", "nattraversal", "method", "port", "control", "protocol", "pcp", "nattraversal", "method", "port", "triggering", "nat", "traversal", "mechanism", "subnetwork", "logical", "subdivision", "of", "an", "ip", "networkpages", "displaying", "short", "descriptions", "of", "redirect", "targets", "teredo", "tunneling", "nat", "traversal", "using", "ipv", "notes", "references", "external", "links", "characterization", "of", "different", "tcp", "nats", "at", "the", "wayback", "machine", "archived", "paper", "discussing", "the", "different", "types", "of", "nat", "anatomy", "a", "look", "inside", "network", "address", "translators", "volume", "issue", "september", "jeff", "tyson", "howstuffworks", "how", "network", "address", "translation", "works", "routing", "with", "nat", "at", "archivetoday", "archived", "part", "of", "the", "documentation", "for", "the", "ibm", "iseries", "network", "address", "translation", "nat", "faq", "cisco", "systems"]